# Тестирование Tinkoff ID.

## Что нужно сделать?


* Для тестирования интеграции методов авторизации Tinkoff ID вам потребуется номер телефона не клиента и клиента банка.

    1. Не клиент банка: проведите отладку сценария ошибочной авторизации;
    2. Клиент банка с тяжелыми продуктами (например: держатель дебетовой карты) необходим для получения SMS с паролями для авторизации.
<details><summary>Тестировщики могут воспользоваться, как уже заведенной картой, так и выпустить новые, если среди разработчиков нет владельцев карт или получен отказа командой тестирования выпускать банковские карты Тинькофф, необходимо выполнить следующие шаги:</summary>

    1. Открыть дебетовую карту (Tinkoff Black) на другого сотрудника компании (например: менеджера).

    Важно: у сотрудника не должно быть существующих карт Тинькофф, нельзя дополнительно открывать кредитную карту Тинькофф.

    2. Отправить письмо команде Тинькофф, в котором будет указано, на какой телефонный номер (тестировщика) необходимо изменить получение SMS по операциям карты.

    Альтернативный вариант: настроить редирект SMS от Tinkoff на номер телефона тестировщика. В данный момент это позволяют сделать только некоторые Android платформы, у iOS это сделать не получится.

    3. Подтвердить по телефону смену номера (будет звонок сотрудника банка). Клиент должен знать на какой номер будет произведена смена.
    4. Провести тестирование.

    5. Обратиться в банк с просьбой смены номера на исходный.
    
    6. Подтвердить смену номера.

</details>


* Для отладки интеграции и прохождения тестовых сценариев разработчики могут:

    1. Добавить тестовые redirect_uri в файл конфигурации для отладки клиентского входа;
    2. Воспользоваться имеющейся [Песочницей](https://business.tinkoff.ru/openapi/sandbox/docs) банка проекта [Tinkoff API](https://business.tinkoff.ru/openapi/docs)
<details><summary>Имеющаяся Песочница предоставляет возможность воспользоваться методами в ознакомительном режиме.</summary>

    - Действия с песочницей не воздействуют на реальные данные.
    - В данной версии песочницы вам не нужно получать токен.
    - Функциональность песочницы находится в доработке, поэтому возможны достаточно частые изменения ее домена и префиксов путей.
    - Вы можете протестировать свою интеграцию, не боясь испортить реальные данные.

</details>
**РЕКОМЕНДАЦИЯ**
Вы можете использовать токен по умолчанию **TinkoffOpenApiSandboxSecretToken** или сформировать реальный токен: [Авторизация web2web](https://tinkoff.github.io/tinkoff-id/w2w/)

* Работа с Access токеном

Для того чтобы использовать Access Token, добавьте заголовок Authorization со значением:
```html
Bearer TinkoffOpenApiSandboxSecretToken.
```
Пример использования:
```html
curl -X GET https://business.tinkoff.ru/openapi/sandbox/api/v1/company -H 'Authorization: Bearer TinkoffOpenApiSandboxSecretToken' -H 'Content-Type: application/json'
```