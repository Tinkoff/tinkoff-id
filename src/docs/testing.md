# Тестирование Tinkoff ID.

## Что нужно сделать?


1. Для тестирования интеграции методов авторизации Tinkoff ID вам потребуется номер телефона не клиента и клиента банка.

    - Не клиент банка: проведите отладку сценария ошибочной авторизации;
    - Клиент банка с тяжелыми продуктами (например: держатель дебетовой карты) необходим для получения SMS с паролями для авторизации.
    <details><summary>Тестировщики могут воспользоваться, как уже заведенной картой, так и выпустить новые, если среди разработчиков нет владельцев карт или получен отказа командой тестирования выпускать банковские карты Тинькофф, необходимо выполнить следующие шаги:</summary>
    
- Открыть дебетовую карту (Tinkoff Black) на другого сотрудника компании (например: менеджера). 
Важно: у сотрудника не должно быть существующих карт Тинькофф, нельзя дополнительно открывать кредитную карту Тинькофф.
- Отправить письмо команде Тинькофф, в котором будет указано, на какой телефонный номер (тестировщика) необходимо изменить получение SMS по операциям карты. 
Альтернативный вариант: настроить редирект SMS от Tinkoff на номер телефона тестировщика. В данный момент это позволяют сделать только некоторые Android платформы, у iOS это сделать не получится.
- Подтвердить по телефону смену номера (будет звонок сотрудника банка). Клиент должен знать на какой номер будет произведена смена
- Провести тестирование.
- Обратиться в банк с просьбой смены номера на исходный.
- Подтвердить смену номера.
</details>


2. Для отладки интеграции и прохождения тестовых сценариев разработчики могут:

    - Добавить тестовые redirect_uri в файл конфигурации для отладки клиентского входа;
    - <details><summary>Вы можете воспользоваться имеющейся Песочницей проекта банка Tinkoff API, которая предоставляет возможность воспользоваться методами в ознакомительном режиме.</summary>

- Действия с песочницей не воздействуют на реальные данные. В данной версии песочницы вам не нужно получать токен. Функциональность песочницы находится в доработке, поэтому возможны достаточно частые изменения ее домена и префиксов путей. 
- Вы можете протестировать свою интеграцию, не боясь испортить реальные данные.
- Вы можете использовать токен по умолчанию TinkoffOpenApiSandboxSecretToken или сформировать реальный токен: [Авторизация web2web Tinkoff ID](https://tinkoff.github.io/tinkoff-id/w2w/)
</details>

3. Работа с Access токеном

Для того чтобы использовать Access Token, добавьте заголовок Authorization со значением:
```html
Bearer TinkoffOpenApiSandboxSecretToken.
```
Пример использования:
```html
curl -X GET https://business.tinkoff.ru/openapi/sandbox/api/v1/company -H 'Authorization: Bearer TinkoffOpenApiSandboxSecretToken' -H 'Content-Type: application/json'
```